<ion-modal-view view-title="NewRestaurant">
    <ion-header-bar class="bar bar-header bar-assertive">
      <h1 class="title">New Restaurant</h1>
      <button class="button button-clear button-primary" ng-click="restaurantModal.hide()"><i class="icon ion-ios-close"></i></button>
    </ion-header-bar>
  <ion-content class="padding">
    <form ng-submit="addRestaurant(restaurant)">
      <div class="list">
        <a class="button button-icon icon ion-camera" ng-click="upload(1)">CAM</a>
        <a class="button button-icon icon ion-camera" ng-click="upload(2)">ALBUM</a>
        <div>
          <div>{{progress}}%</div>
          <img ng-show="imageURL" ng-src="{{imageURL}}" width="100%"/>

        </div>
        <label class="item item-input">
          <input type="text" placeholder="Name of Restaurant" ng-model="restaurant.name">
        </label>
        <label class="item item-input">
          <input type="text" placeholder="Location of Restaurant" ng-model="restaurant.location" details="detail" ng-change="allowDetailToChangeMarker()" googleplace/>
        </label>
        <label class="item item-input">
          <input type="text" ng-model="restaurant.phonenumber" ui-mask="(999) 999-9999"  ui-mask-placeholder ui-mask-placeholder-char="_"/>
        </label>
        <ui-gmap-google-map zoom='map.zoom' events= 'map.events' center='map.center' options='map.options' bounds='map.bounds' control="modalControl">
          <ui-gmap-map-control position="top-right">
              <a class="button button-small button-balanced" ng-click="markLocation()" >Mark Current Location</a>
          </ui-gmap-map-control>
          <ui-gmap-marker coords="marker.coords" icon="marker.icon" idkey="marker.id"></ui-gmap-marker>
        </ui-gmap-google-map>
        <label class="item item-input">
          <input type="text" placeholder="Type of Restaurant" ng-model="restaurant.type">
        </label>
        <label class="item item-input">
          <input type="text" placeholder="Cuisine of Restaurant" ng-model="restaurant.cuisine">
        </label>
      </div>
      <div class="item item-icon-left" ion-datetime-picker time am-pm ng-model="restaurant.openTime">
        <i class="icon ion-ios-clock positive"></i>
        Open Time:
        <strong>{{restaurant.openTime| date: "h:mm a"}}</strong>
      </div>
      <div class="item item-icon-left" ion-datetime-picker time am-pm ng-model="restaurant.closeTime">
        <i class="icon ion-ios-clock positive"></i>
        Close Time:
        <strong>{{restaurant.closeTime| date: "h:mm a"}}</strong>
      </div>
      <p ng-repeat="facility in facilities">
        {{facility.name}}
      </p>
      {{restaurant.facilities}}
      <ul class="list">
        <li class="item item-checkbox" ng-repeat="facility in facilities">
          <label class="checkbox">
            <input type="checkbox" ng-model="restaurant.facilities[facility.$id]">
          </label>
            {{facility.name}}
        </li>
      </ul>

      <div class="padding">
        <button type="submit" class="button button-block button-positive">Add Restaurant</button>
      </div>
    </form>
    <!-- watch does not work on this function -->
    <div ng-cloak>{{locationDetail(detail)}}</div>
  </ion-content>
</ion-modal-view>
