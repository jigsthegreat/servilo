<ion-view view-title="Home">
  <ion-content class="padding" overflow-scroll="true">
    <ion-list>
      <ui-gmap-google-map zoom='map.zoom' center="map.center" options='map.options' bounds='map.bounds'>
        <ui-gmap-markers models="markers" coords="'coords'" icon="'icon'">
        </ui-gmap-markers>
      </ui-gmap-google-map>
      <h3>Restaurants</h3>
      <button ng-click="signOut()">Sign Out</button>
      <label>Search: <input ng-model="searchText"></label>
      <ion-item ng-repeat="restaurant in restaurants | filter:searchText">
        <a ng-init="addMarker(restaurant)" class="button button-calm icon icon-right ion-chevron-right" ui-sref="tabs.viewRestaurant({restaurantId:restaurant.$id})">{{restaurant.name}}</a>
        <p ng-if="restaurant.secured_data.totalMenuCount != 0">
          Avg Price:
            {{getAvg(restaurant.$id) | currency:"â‚±"}}

        </p>
        <p>
          Rating: {{getAvgRating(restaurant.$id)}} / 5
        </p>
      </ion-item>
    </ion-list>
  </ion-content>
</ion-view>
